generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
  binaryTargets   = ["native", "debian-openssl-1.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Track {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  sessions Session[] @relation("SessionToTrack")
}

model Speaker {
  id           Int           @id @default(autoincrement()) 
  name         String        @unique
  sessions     Session[]     @relation("SessionToSpeaker")
  subSessions  SubSession[]  @relation("SubSessionToSpeaker")
}

model Session {
  id              Int           @id @default(autoincrement())
  name            String
  startTime       DateTime
  endTime         DateTime  
  date            DateTime
  location        String?
  description     String?
  sessionId       String?       @db.VarChar(50)
  isVirtual       Boolean       @default(false)
  eventName       String?
  timezone        String?       @db.VarChar(50)
  tracks          Track[]       @relation("SessionToTrack")
  speakers        Speaker[]     @relation("SessionToSpeaker")
  subSessions     SubSession[]
}

model SubSession {
  id               Int       @id @default(autoincrement())
  parentSession    Session   @relation(fields: [parentSessionId], references: [id])
  parentSessionId  Int
  name             String
  description      String?
  speakers         Speaker[] @relation("SubSessionToSpeaker")
}
